{"ast":null,"code":"var _s = $RefreshSig$();\nimport axios from '../libs/axios.js';\nimport { useState, useEffect, useContext, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { serverContext } from '../App.js';\nexport const useVerify = () => {\n  _s();\n  /*\tconst [id, setId] = useState('')\n  \tconst [authUser, setAuthUser] = useState('')\n  \tconst [authFullname, setAuthFullName] = useState('')\n  \tconst [admin, setAdmin] = useState(true)\n  */\n\n  const id = useRef('');\n  const authUser = useRef('');\n  const authFullname = useRef('');\n  const admin = useRef(true);\n  const server = useContext(serverContext);\n  const navigate = useNavigate();\n  const verify = async () => {\n    try {\n      const res = await axios.get(`${server}`);\n      if (res.data.verified === true) {\n        if (res.data.user !== 'admin') {\n          //setAdmin(false)\n          admin.current = false;\n        }\n\n        /*    setId(res.data.id)\n            setAuthUser(res.data.user)\n            setAuthFullName(res.data.fullname)\n        */\n\n        id.current = res.data.id;\n        authUser.current = res.data.user;\n        authFullname.current = res.data.fullname;\n      } else {\n        navigate('/login');\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    verify();\n  }, []);\n  return {\n    id: id.current,\n    authUser: authUser.current,\n    authFullname: authFullname.current,\n    admin: admin.current\n  };\n};\n_s(useVerify, \"pn8IFupET37oKzMRjDKyZFWOE6U=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["axios","useState","useEffect","useContext","useRef","useNavigate","serverContext","useVerify","_s","id","authUser","authFullname","admin","server","navigate","verify","res","get","data","verified","user","current","fullname","error","console","log"],"sources":["/data/data/com.termux/files/home/www/proxy-users-mongodb/app/src/hooks/useVerify.js"],"sourcesContent":["import axios from '../libs/axios.js'\nimport { useState, useEffect, useContext, useRef } from 'react'\nimport { useNavigate} from 'react-router-dom'\nimport { serverContext } from '../App.js'\n\nexport const useVerify = () => {\n/*\tconst [id, setId] = useState('')\n\tconst [authUser, setAuthUser] = useState('')\n\tconst [authFullname, setAuthFullName] = useState('')\n\tconst [admin, setAdmin] = useState(true)\n*/\n\n\tconst id = useRef('')\n\tconst authUser = useRef('')\n\tconst authFullname = useRef('')\n\tconst admin = useRef(true)\n\n\tconst server = useContext(serverContext)\n\tconst navigate = useNavigate()\n\n\t\tconst verify = async () => {\n\t\ttry {\n\t\t\tconst res = await axios.get(`${server}`)\n\t\t\tif (res.data.verified === true) {\n\t\t    \tif (res.data.user !== 'admin') {\n\t\t            //setAdmin(false)\n\t\t            admin.current = false\n\t\t    \t}\n\n\t\t    /*    setId(res.data.id)\n\t\t        setAuthUser(res.data.user)\n\t\t        setAuthFullName(res.data.fullname)\n\t\t    */\n\t\t    \n\t\t    id.current = res.data.id\n\t\t    authUser.current = res.data.user\n\t\t    authFullname.current = res.data.fullname\n\t\t        \t\n\t\t    } else {\n\t\t    \tnavigate('/login')\n\t\t    }\n\t\t } catch (error) {\n\t\t \tconsole.log(error)\n\t\t }\n\t\t }\n\t\t\n\tuseEffect(() => {\n\t\tverify()\n\t}, [])\n\n\treturn { id:id.current, authUser:authUser.current, authFullname:authFullname.current, admin:admin.current }\n}\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,kBAAkB;AACpC,SAASC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,EAAEC,MAAM,QAAQ,OAAO;AAC/D,SAASC,WAAW,QAAO,kBAAkB;AAC7C,SAASC,aAAa,QAAQ,WAAW;AAEzC,OAAO,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B;AACA;AACA;AACA;AACA;;EAEC,MAAMC,EAAE,GAAGL,MAAM,CAAC,EAAE,CAAC;EACrB,MAAMM,QAAQ,GAAGN,MAAM,CAAC,EAAE,CAAC;EAC3B,MAAMO,YAAY,GAAGP,MAAM,CAAC,EAAE,CAAC;EAC/B,MAAMQ,KAAK,GAAGR,MAAM,CAAC,IAAI,CAAC;EAE1B,MAAMS,MAAM,GAAGV,UAAU,CAACG,aAAa,CAAC;EACxC,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE7B,MAAMU,MAAM,GAAG,MAAAA,CAAA,KAAY;IAC3B,IAAI;MACH,MAAMC,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,GAAGJ,MAAM,EAAE,CAAC;MACxC,IAAIG,GAAG,CAACE,IAAI,CAACC,QAAQ,KAAK,IAAI,EAAE;QAC5B,IAAIH,GAAG,CAACE,IAAI,CAACE,IAAI,KAAK,OAAO,EAAE;UACxB;UACAR,KAAK,CAACS,OAAO,GAAG,KAAK;QAC5B;;QAED;AACN;AACA;AACA;;QAEMZ,EAAE,CAACY,OAAO,GAAGL,GAAG,CAACE,IAAI,CAACT,EAAE;QACxBC,QAAQ,CAACW,OAAO,GAAGL,GAAG,CAACE,IAAI,CAACE,IAAI;QAChCT,YAAY,CAACU,OAAO,GAAGL,GAAG,CAACE,IAAI,CAACI,QAAQ;MAExC,CAAC,MAAM;QACNR,QAAQ,CAAC,QAAQ,CAAC;MACnB;IACH,CAAC,CAAC,OAAOS,KAAK,EAAE;MACfC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACnB;EACA,CAAC;EAEHrB,SAAS,CAAC,MAAM;IACfa,MAAM,CAAC,CAAC;EACT,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEN,EAAE,EAACA,EAAE,CAACY,OAAO;IAAEX,QAAQ,EAACA,QAAQ,CAACW,OAAO;IAAEV,YAAY,EAACA,YAAY,CAACU,OAAO;IAAET,KAAK,EAACA,KAAK,CAACS;EAAQ,CAAC;AAC5G,CAAC;AAAAb,EAAA,CA9CYD,SAAS;EAAA,QAaJF,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}